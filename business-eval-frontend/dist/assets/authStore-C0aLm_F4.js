import{c as u,a as i}from"./axios-Bmm4lkOe.js";const d="https://business-app-2.vercel.app/api",c=u(s=>({isLoading:!1,error:null,user:null,signup:async t=>{var o,a;s({isLoading:!0,error:null});try{const r=await i.post(`${d}/user/register`,t),e=r.data.user._id;return localStorage.setItem("user_id",e),localStorage.setItem("token",r.data.token),s({isLoading:!1,user:r.data}),r.data}catch(r){const e=((a=(o=r.response)==null?void 0:o.data)==null?void 0:a.message)||"Signup failed";throw s({isLoading:!1,error:e}),new Error(e)}},login:async t=>{var o,a;s({isLoading:!0,error:null});try{const r=await i.post(`${d}/user/login`,t),e=r.data.user._id;return localStorage.setItem("user_id",e),localStorage.setItem("token",r.data.token),console.log(e),s({isLoading:!1,user:r.data}),r.data}catch(r){const e=((a=(o=r.response)==null?void 0:o.data)==null?void 0:a.message)||"Login failed";throw s({isLoading:!1,error:e}),new Error(e)}},forgotPassword:async t=>{var o,a;s({isLoading:!0,error:null});try{const r=await i.post(`${d}/user/forgot-password`,{email:t});return s({isLoading:!1}),r.data}catch(r){const e=((a=(o=r.response)==null?void 0:o.data)==null?void 0:a.message)||"Failed to send reset link";throw s({isLoading:!1,error:e}),new Error(e)}},resetPassword:async({otp:t,email:o,password:a})=>{var r,e;s({isLoading:!0,error:null});try{const n=await i.post(`${d}/user/reset-password`,{otp:t,email:o,password:a});return s({isLoading:!1}),n.data}catch(n){const l=((e=(r=n.response)==null?void 0:r.data)==null?void 0:e.message)||"Failed to reset password";throw s({isLoading:!1,error:l}),new Error(l)}},verifyOtp:async({email:t,otp:o})=>{var a,r;s({isLoading:!0,error:null});try{const e=await i.post(`${d}/user/verify-otp`,{email:t,otp:o});return s({isLoading:!1,user:e.data}),e.data}catch(e){const n=((r=(a=e.response)==null?void 0:a.data)==null?void 0:r.message)||"OTP verification failed";throw s({isLoading:!1,error:n}),new Error(n)}},logout:()=>{s({user:null})}}));export{c as u};
